<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" href="favicon.ico">

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
        <style>
            input[type="text"] {
                width: 100px;
            }

            input[type="date"] {
                width: 140px;
            }

            .clear-both {
                clear: both;
            }

            .display-none {
                display: none;
            }

            .top-padding {
                min-height: 75rem;
                padding-top: 4.5rem;
            }

            .fg-blur {
                backdrop-filter: blur(4px);
            }

            .bg-blur {
                filter: blur(4px);
            }

            .weight-bold {
                font-weight: bold;
            }

            #bodyDiv {
                margin-left: 50px;
            }

            #plotControls>div>label {
                margin-right: 10px;
            }

            #updateBtn,
            #elecUpdateBtn,
            #elecMinuteDateUpdateBtn,
            #elecMinuteDayBackward {
                margin-left: 30px;
            }

            #infoText {
                margin-top: 15px;
                margin-bottom: 10px;
                font-size: 0.9em;
            }

            #latestCheckboxDiv {
                margin-bottom: 15px;
                font-size: 0.8em;
            }

            #noDataError {
                width: 1350px;
                margin-top: 20px;
            }

            #elecDataDiv {
                width: 1300px;
                margin-top: 20px;
            }

            #elecInfoBox {
                margin-top: 15px;
            }

            #loadingSpinner {
                backdrop-filter: blur(10px);
                width: 3.5em;
                height: 3.5em;
            }

            #imageButtonDiv {
                margin-top: 20px;
                margin-bottom: 20px;
            }

            #imageDiv {
                margin-bottom: 20px;
            }

            #plotAccordion,
            #elecPlotAccordion {
                width: 1350px;
                margin-top: 20px;
            }

            .accordionButtonDiv {
                margin-top: 10px;
                margin-left: 20px;
                margin-bottom: 20px;
            }

            #elecMinuteDateDiv {
                margin: 10px 0 5px 10px;
            }

            #elecMinuteDate {
                margin-left: 10px;
            }

            #elecPriceShowFees {
                margin-left: 80px;
            }
        </style>

        <title>Environment log viewer - observations</title>
    </head>
    <body class="top-padding">
        <div id="bodyDiv">
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">Environment logger</a>
                    <ul class="navbar-nav">
                        <li class="nav-item" style="margin-right: 20px;">
                            <a class="nav-link" href="misc/elec-consumption">Electricity consumption upload</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="logout">Log out</a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="clear-both">
                <h4>Date interval to show</h4>
                <form>
                    <input type="date" id="startDate">
                    &nbsp;-&nbsp;
                    <input type="date" id="endDate">
                    <input type="button" class="btn btn-primary" id="updateBtn" value="Update">
                </form>
            </div>

            <div class="display-none" id="infoText"></div>

            <div class="display-none alert alert-danger" id="noDataError" role="alert">
                No observations found
            </div>
            <div id="latestCheckboxDiv">
                <input type="checkbox" id="showInfoText" checked>
                <label for="showInfoText">Show above info</label>
            </div>

            <div class="accordion" id="plotAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#weatherPlotAccordion" aria-expanded="false" aria-controls="weatherPlotAccordion">
                            Weather observations
                        </button>
                    </h2>
                    <div id="weatherPlotAccordion" class="accordion-collapse collapse">
                        <div id="weatherPlot"></div>

                        <div class="accordionButtonDiv">
                            <input type="button" id="weatherHideAll" class="btn btn-danger" value="Hide all series">
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#otherPlotAccordion" aria-expanded=false" aria-controls="otherPlotAccordion">
                            Other observations
                        </button>
                    </h2>
                    <div id="otherPlotAccordion" class="accordion-collapse collapse">
                        <div id="otherPlot"></div>

                        <div class="accordionButtonDiv">
                            <input type="button" id="otherShowAll" class="btn btn-secondary" value="Show all series"
                                   style="margin-right: 10px">
                            <input type="button" id="otherHideAll" class="btn btn-danger" value="Hide all series">
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#ruuvitagPlotAccordion" aria-expanded="false" aria-controls="collapseTwo">
                            RuuviTag observations
                        </button>
                    </h2>
                    <div id="ruuvitagPlotAccordion" class="accordion-collapse collapse">
                        <div id="ruuvitagPlot"></div>

                        <div class="accordionButtonDiv">
                            <input type="button" id="ruuvitagShowAll" class="btn btn-secondary" value="Show all series"
                                   style="margin-right: 10px">
                            <input type="button" id="ruuvitagHideAll" class="btn btn-danger" value="Hide all series">

                            <input type="button" id="ruuvitagShowTemperature" class="btn btn-light" value="Show temperature series"
                                   style="margin-left: 40px">
                            <input type="button" id="ruuvitagShowHumidity" class="btn btn-light" value="Show humidity series"
                                   style="margin-left: 10px">
                        </div>
                    </div>
                </div>
            </div>

            <div id="elecDataDiv">
                <h5>Electricity data</h5>
                <form>
                    <input type="date" id="elecStartDate">
                    &nbsp;-&nbsp;

                    <input type="date" id="elecEndDate">
                    <input type="button" class="btn btn-primary" id="elecUpdateBtn" value="Update">

                    <input type="checkbox" id="elecPriceShowFees" checked />
                    <label for="elecPriceShowFees">Show price with fees</label>
                </form>

                <div id="elecInfoBox"></div>

                <div class="accordion" id="elecPlotAccordion">
                    <div class="accordion-item" id="elecMinuteAccordion">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#elecMinutePlotAccordion"
                                    aria-expanded="true" aria-controls="elecMinutePlotAccordion">
                                Electricity price (15 minute resolution)
                            </button>
                        </h2>
                        <div id="elecMinutePlotAccordion" class="accordion-collapse collapse show">
                            <div id="elecMinuteDateDiv">
                                <form>
                                    <label for="elecMinuteDate">Date</label>
                                    <input type="date" id="elecMinuteDate">
                                    <input type="button" class="btn btn-primary" id="elecMinuteDateUpdateBtn" value="Update">

                                    <button type="button" id="elecMinuteDayBackward" class="btn btn-light" title="Backward one day">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5"/>
                                        </svg>
                                    </button>
                                    <button type="button" id="elecMinuteDayForward" class="btn btn-light" title="Forward one day">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8"/>
                                        </svg>
                                    </button>
                                </form>
                            </div>
                            <div id="minuteElecDataPlot"></div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#elecHourPlotAccordion"
                                    aria-expanded="true" aria-controls="elecHourPlotAccordion">
                                Hourly electricity data
                            </button>
                        </h2>
                        <div id="elecHourPlotAccordion" class="accordion-collapse collapse show">
                            <div id="hourElecDataPlot"></div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#elecDayPlotAccordion"
                                aria-expanded="true" aria-controls="elecDayPlotAccordion">
                                Daily electricity data
                            </button>
                        </h2>
                        <div id="elecDayPlotAccordion" class="accordion-collapse collapse show">
                            <div id="dayElecDataPlot"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="imageButtonDiv">
                <input type="checkbox" id="showImages">
                <label for="showImages">Show Testbed image</label>
            </div>
            <div id="imageDiv" class="display-none">
                <img src="" id="testbedImage" alt="FMI Testbed image">
            </div>
        </div>

        <div id="loadingSpinner" class="spinner-border position-absolute top-50 start-50 display-none" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
                crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/luxon@3.7.2/build/global/luxon.min.js"
                integrity="sha256-UWxf6lyCvfH7XEcrmq/cqc2m3IBrLBLOnWLC4Pw0gQQ=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/plotly.js@3.1.2/dist/plotly.min.js"
                integrity="sha256-9pDWas9v7mqPbmZXi1HJn2mbawDZRxY9YlWboeeU1Fg=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios@1.12.2/dist/axios.min.js"
                integrity="sha256-9UiRtJ3cNB91qdVSArvgPVFvPO84K24aze2J0b7NKu0=" crossorigin="anonymous"></script>
        <script src="js/chart.js"></script>
    </body>
</html>
